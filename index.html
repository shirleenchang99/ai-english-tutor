<!DOCTYPE html>
<html lang="zh-cn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>AI English Tutor</title>

<style>
  body { font-family: Arial, sans-serif; background:#f0f6ff; margin:0; }
  header { background:#1E88E5; color:white; padding:15px; font-size:20px; text-align:center; }
  .nav { display:flex; justify-content:space-around; background:white; padding:10px 0; }
  .nav button { background:#e3f2fd; border:none; padding:8px 16px; border-radius:6px; }
  .section { padding:20px; }
  .card { background:white; padding:20px; border-radius:10px; margin-top:10px; }
  input, button {
    font-size:18px; padding:10px; margin-top:10px;
    border-radius:6px; border:1px solid #bbb;
  }
  button { background:#1E88E5; color:white; border:none; }
  .word-btn { background:#64b5f6; width:100%; margin:5px 0; }
  .hidden { display:none; }
</style>
</head>

<body>

<header>AI English Tutor</header>

<div class="nav">
  <button onclick="showSection('lookup')">ğŸ” æŸ¥è¯</button>
  <button onclick="showSection('listen')">ğŸ§ å¬å†™</button>
  <button onclick="showSection('words')">ğŸ“š ç”Ÿè¯æœ¬</button>
</div>

<!-- æŸ¥è¯ -->
<div id="lookup" class="section">
  <input id="inputText" placeholder="è¯·è¾“å…¥è‹±æ–‡â€¦">
  <button onclick="translateText()">æŸ¥è¯¢</button>

  <div class="card">
    <div><b>ä¸­æ–‡è§£é‡Šï¼š</b></div>
    <div id="outputCn">ï¼ˆç­‰å¾…è¾“å…¥ï¼‰</div>
    <button onclick="speak()">ğŸ”Šå‘éŸ³</button>
    <button onclick="addToListen()">åŠ å…¥å¬å†™</button>
  </div>
</div>

<!-- å¬å†™ -->
<div id="listen" class="section hidden">
  <div><b>é€‰æ‹©è¯åº“ï¼š</b></div>
  <button class="word-btn" onclick="selectLevel('k1')">K1 å¯è’™</button>
  <button class="word-btn" onclick="selectLevel('primary')">å°å­¦</button>
  <button class="word-btn" onclick="selectLevel('adult')">æˆäºº</button>
  <button class="word-btn" onclick="selectLevel('business')">å•†åŠ¡</button>

  <div class="card">
    <button onclick="playWord()">â–¶ æ’­æ”¾è‹±æ–‡</button>
    <input id="answer" placeholder="è¯·è¾“å…¥å¬åˆ°çš„è‹±æ–‡">
    <button onclick="checkAnswer()">æäº¤</button>
    <div id="result"></div>
  </div>
</div>

<!-- ç”Ÿè¯æœ¬ -->
<div id="words" class="section hidden">
  <div class="card">
    <b>ç”Ÿè¯æœ¬ï¼š</b>
    <ul id="wordList"></ul>
  </div>
</div>

<script>
// ğŸ“š åˆ†çº§è¯åº“æ•°æ®ï¼ˆç¤ºä¾‹ç‰ˆï¼Œå¯æ‰©å±•ï¼‰
const wordLevels = {
  k1: ["apple","cat","dog","red","blue","ball","water"],
  primary: ["family","school","table","happy","morning","banana"],
  adult: ["experience","market","decision","improve","customer"],
  business: ["meeting","contract","management","investment","delivery"]
};

let selectedLevel = "k1";
let currentWord = "";
let wrongWords = JSON.parse(localStorage.getItem("wrongWords") || "[]");

// ğŸ”¹ åˆ‡æ¢ç•Œé¢
function showSection(id){
  document.querySelectorAll(".section").forEach(s=>s.classList.add("hidden"));
  document.getElementById(id).classList.remove("hidden");
  showWrongWords();
}

// ğŸ”¹ ç¿»è¯‘
async function translateText(){
  const text = document.getElementById("inputText").value;
  if(!text) return;
  currentWord = text;
  const res = await fetch(
    `https://translate.googleapis.com/translate_a/single?client=gtx&sl=en&tl=zh-CN&dt=t&q=${encodeURI(text)}`
  );
  const data = await res.json();
  document.getElementById("outputCn").innerText = data[0][0][0];
}

// ğŸ”¹ å‘éŸ³
function speak(){
  const utter = new SpeechSynthesisUtterance(currentWord);
  utter.lang = "en-US";
  speechSynthesis.speak(utter);
}

// ğŸ”¹ åŠ å…¥å¬å†™
function addToListen(){
  alert("å·²åŠ å…¥å¬å†™ç»ƒä¹ ï¼");
}

// ğŸ”¹ é€‰æ‹©è¯åº“
function selectLevel(lv){
  selectedLevel = lv;
  alert("åˆ‡æ¢åˆ°è¯åº“ï¼š" + lv);
}

// ğŸ”¹ æ’­æ”¾è‹±æ–‡
function playWord(){
  const list = wordLevels[selectedLevel];
  currentWord = list[Math.floor(Math.random()*list.length)];
  speak();
}

// ğŸ”¹ åˆ¤åˆ†
function checkAnswer(){
  const ans = document.getElementById("answer").value.trim().toLowerCase();
  if(ans === currentWord){
    document.getElementById("result").innerHTML = "âœ” æ­£ç¡®ï¼";
  }else{
    document.getElementById("result").innerHTML = `âŒ é”™ï¼æ­£ç¡®ï¼š${currentWord}`;
    wrongWords.push(currentWord);
    localStorage.setItem("wrongWords", JSON.stringify(wrongWords));
    showWrongWords();
  }
  document.getElementById("answer").value = "";
}

// ğŸ”¹ ç”Ÿè¯æœ¬æ˜¾ç¤º
function showWrongWords(){
  const ul = document.getElementById("wordList");
  ul.innerHTML = "";
  wrongWords.forEach(w=>{
    ul.innerHTML += `<li>${w}</li>`;
  });
}
</script>

</body>
</html>
